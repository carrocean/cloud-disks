import{_ as E,u as ne,r as u,k as oe,m as se,n as ie,q as L,e as l,o as $,c as M,b as e,w as t,s,t as ue,v as de,x as re,y as ce,z as _e,A as pe,B as fe,C as me,D as he,p as ye,g as ve,a as o,F as U,G as we,H as ge,I as be,J as xe,K as Fe,L as A,M as ke,N as Ce,f as F,O as Se,P as qe,Q as T,R as Te,E as N,i as Ne}from"./index-_cVeiGfl.js";const m=d=>(ye("data-v-428e369b"),d=d(),ve(),d),$e={class:"side-menu-wrapper"},ze=m(()=>o("span",null,"我的文件",-1)),Re=m(()=>o("span",null,"全部",-1)),Le=m(()=>o("span",null,"图片",-1)),Me=m(()=>o("span",null,"文档",-1)),Ue=m(()=>o("span",null,"视频",-1)),De=m(()=>o("span",null,"音乐",-1)),Be=m(()=>o("span",null,"其他",-1)),Ie=m(()=>o("span",null,"回收站",-1)),Oe=m(()=>o("span",null,"我的分享",-1)),Ae={__name:"AsideMenu",setup(d){const g=ne(),h=u(!1),f=u({0:"全部",1:"图片",2:"文档",3:"视频",4:"音乐",5:"其他",6:"回收站",8:"我的分享"}),y=oe(()=>String(g.query.fileType));return se(y,b=>{document.title=`${f[Number(b)]} - ${L.siteName}`}),ie(()=>{document.title=`${f[Number(y)]} - ${L.siteName}`}),(b,x)=>{const c=l("el-icon"),_=l("el-menu-item"),k=l("el-sub-menu"),z=l("el-menu");return $(),M("div",$e,[e(z,{class:"side-menu","default-active":y.value,router:!0,collapse:h.value},{default:t(()=>[e(k,{index:"myFile",class:"my-file"},{title:t(()=>[e(c,{size:20},{default:t(()=>[e(s(ue))]),_:1}),ze]),default:t(()=>[e(_,{index:"0",route:{name:"file",query:{fileType:0,filePath:"/"}}},{default:t(()=>[e(c,{size:20},{default:t(()=>[e(s(de))]),_:1}),Re]),_:1}),e(_,{index:"1",route:{name:"file",query:{fileType:1}}},{default:t(()=>[e(c,{size:20},{default:t(()=>[e(s(re))]),_:1}),Le]),_:1}),e(_,{index:"2",route:{name:"file",query:{fileType:2}}},{default:t(()=>[e(c,{size:20},{default:t(()=>[e(s(ce))]),_:1}),Me]),_:1}),e(_,{index:"3",route:{name:"file",query:{fileType:3}}},{default:t(()=>[e(c,{size:20},{default:t(()=>[e(s(_e))]),_:1}),Ue]),_:1}),e(_,{index:"4",route:{name:"file",query:{fileType:4}}},{default:t(()=>[e(c,{size:20},{default:t(()=>[e(s(pe))]),_:1}),De]),_:1}),e(_,{index:"5",route:{name:"file",query:{fileType:5}}},{default:t(()=>[e(c,{size:20},{default:t(()=>[e(s(fe))]),_:1}),Be]),_:1})]),_:1}),e(_,{index:"6",route:{name:"file",query:{fileType:6}},class:"recovery"},{default:t(()=>[e(c,{size:20},{default:t(()=>[e(s(me))]),_:1}),Ie]),_:1}),e(_,{index:"8",route:{name:"file",query:{fileType:8,filePath:"/"}},class:"my-share"},{default:t(()=>[e(c,{size:20},{default:t(()=>[e(s(he))]),_:1}),Oe]),_:1})]),_:1},8,["default-active","collapse"])])}}},Ee=E(Ae,[["__scopeId","data-v-428e369b"]]);var r="/api/cloud/disks/file/",D={fileList:r+"fileList",showUpload:r+"showUpload",makeFolder:r+"makeFolder",deleteFileOrFolder:r+"deleteFileOrFolder",renameFileOrFolder:r+"renameFileOrFolder",showTree:r+"showTree",tree:r+"tree",copyOrMoveFile:r+"copyOrMoveFile",downloadFile:r+"downloadFile",viewFile:r+"viewFile",upload:r+"upload",deleteFile:r+"deleteFile"};function Pe(d){return U({url:D.fileList,method:"get",params:d})}function Ve(d){return U({url:D.deleteFile,method:"put",params:d})}function Ke(d){return U({url:D.downloadFile,method:"get",params:d})}const Qe={class:"app-container"},je=o("span",null,"上传",-1),Ge=["src"],He={__name:"FileList",setup(d){const{proxy:g}=Ne();we();const h=u([]),f=u(!1),y=u(!0),b=u([]),x=u(!0),c=u(0);u("");const _=u([]),k=u({prop:"operTime",order:"descending"}),z=ge({queryParams:{pageNum:1,pageSize:10,title:void 0,operName:void 0,businessType:void 0,status:void 0}}),{queryParams:v}=be(z),P=xe.getCookies(L.tokenKeyName),V=u({token:P}),K=u("http://carrocean.top:30001/api/cloud/disks/file/upload");function Q(){N.success("上传成功"),C()}function j(a){return new URL("/assets/file_txt-hEEyj9Xw.png",import.meta.url).href}function C(){f.value=!0,Pe(v.value,_.value).then(a=>{h.value=a.data,c.value=a.total,f.value=!1})}function R(){v.value.pageNum=1,C()}function G(){_.value=[],g.resetForm("queryRef"),g.$refs.operlogRef.sort(k.value.prop,k.value.order),R()}function H(a){b.value=a.map(p=>p.id),x.value=!a.length}function J(a,p,S){v.value.orderByColumn=a.prop,v.value.isAsc=a.order,C()}function B(a){f.value=!0,Ve(a).then(p=>{N.success("删除成功"),C(),f.value=!1})}async function X(a){Ke(a).then(p=>{if(p){let S=a.originalName,q=window.URL.createObjectURL(new Blob([p.data])),i=document.createElement("a");i.href=q,i.setAttribute("download",S),document.body.appendChild(i),i.click(),document.body.removeChild(i),N.success("下载成功")}else console.error("下载失败，响应状态码：",p.status),N.error("下载失败")})}async function W(a){}return C(),(a,p)=>{const S=l("el-input"),q=l("el-form-item"),i=l("el-button"),Y=l("el-form"),Z=l("el-icon"),ee=l("el-upload"),I=l("el-col"),te=l("el-row"),w=l("el-table-column"),le=l("el-table"),ae=Fe("loading");return $(),M("div",Qe,[A(e(Y,{model:s(v),ref:"queryRef",inline:!0,"label-width":"68px",style:{float:"right"}},{default:t(()=>[e(q,{label:"文件名称",prop:"title"},{default:t(()=>[e(S,{modelValue:s(v).name,"onUpdate:modelValue":p[0]||(p[0]=n=>s(v).name=n),placeholder:"请输入文件名称",clearable:"",style:{width:"240px"},onKeyup:Ce(R,["enter"])},null,8,["modelValue"])]),_:1}),e(q,null,{default:t(()=>[e(i,{type:"primary",icon:"Search",onClick:R},{default:t(()=>[F("搜索")]),_:1}),e(i,{icon:"Refresh",onClick:G},{default:t(()=>[F("重置")]),_:1})]),_:1})]),_:1},8,["model"]),[[ke,y.value]]),e(te,{gutter:10,class:"mb10"},{default:t(()=>[e(I,{span:1.5},{default:t(()=>[e(ee,{action:K.value,limit:1,headers:V.value,"show-file-list":!1,"on-success":Q},{trigger:t(()=>[e(i,{type:"primary",plain:""},{default:t(()=>[e(Z,null,{default:t(()=>[e(s(Se))]),_:1}),je]),_:1})]),_:1},8,["action","headers"])]),_:1}),e(I,{span:1.5},{default:t(()=>[e(i,{type:"danger",plain:"",icon:"Delete",disabled:x.value,onClick:B},{default:t(()=>[F("删除 ")]),_:1},8,["disabled"])]),_:1})]),_:1}),A(($(),qe(le,{ref:"operlogRef",data:h.value,onSelectionChange:H,"default-sort":k.value,onSortChange:J},{default:t(()=>[e(w,{type:"selection",width:"55",align:"center"}),e(w,{width:"60"},{default:t(n=>[o("img",{src:j(n.row.type),style:{width:"30px","max-height":"30px"}},null,8,Ge)]),_:1}),e(w,{label:"文件名称",align:"left",prop:"name"},{default:t(n=>[o("span",null,T(n.row.name),1)]),_:1}),e(w,{label:"文件类型",align:"left",prop:"type"},{default:t(n=>[o("span",null,T(n.row.type),1)]),_:1}),e(w,{label:"大小",align:"left",prop:"size"},{default:t(n=>[o("span",null,T(n.row.size)+" B",1)]),_:1}),e(w,{label:"添加日期",align:"center",prop:"date",sortable:"custom","sort-orders":["descending","ascending"]},{default:t(n=>[o("span",null,T(s(Te)(n.row.date)),1)]),_:1}),e(w,{label:"操作",align:"center",width:"200","class-name":"small-padding fixed-width"},{default:t(n=>[e(i,{type:"text",icon:"Download",onClick:O=>X(n.row)},{default:t(()=>[F("下载 ")]),_:2},1032,["onClick"]),e(i,{type:"text",icon:"Share",onClick:O=>W(n.row)},{default:t(()=>[F("分享 ")]),_:2},1032,["onClick"]),e(i,{type:"text",icon:"Delete",onClick:O=>B(n.row)},{default:t(()=>[F("删除 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","default-sort"])),[[ae,f.value]])])}}},Je={__name:"File",setup(d){function g(h){h.stopPropagation(),h.preventDefault(),console.log("showUploadMask"),this.$store.commit("showUploadMask")}return(h,f)=>{const y=l("el-aside"),b=l("el-main"),x=l("el-container");return $(),M("div",{class:"file-wrapper",onDragenter:g},[e(x,{class:"el-container"},{default:t(()=>[e(y,{width:"auto"},{default:t(()=>[e(Ee)]),_:1}),e(x,null,{default:t(()=>[e(b,{class:"el-main"},{default:t(()=>[e(He)]),_:1})]),_:1})]),_:1})],32)}}},We=E(Je,[["__scopeId","data-v-f54827de"]]);export{We as default};
